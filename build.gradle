apply plugin:'war'
version=1.0
ext.projectName='repl'
defaultTasks 'war'
ext.ceylonVersion=0.2

repositories {
	mavenCentral()
	flatDir name:'ceylon', dirs:["${System.properties['user.home']}/.ceylon/repo/com/redhat/ceylon/typechecker/${ceylonVersion}",
		"${System.properties['user.home']}/.ceylon/repo/com/redhat/ceylon/module-resolver/${ceylonVersion}",
		'../ceylon-js/build/lib']
}

dependencies {
	compile "ceylon:com.redhat.ceylon.typechecker:${ceylonVersion}", "ceylon:jscompiler:${ceylonVersion}",
		"ceylon:com.redhat.ceylon.module-resolver:${ceylonVersion}"
	providedCompile 'org.jboss.spec:jboss-javaee-6.0:1.0.0.Final'
	testCompile 'junit:junit:4.10'
}

task copylangmod(type:Copy) {
	from "../ceylon-js/build/runtime/ceylon/language/${ceylonVersion}/ceylon.language.js"
	into "${webAppDirName}/scripts/modules/ceylon/language/${ceylonVersion}"
}

war.baseName='repl'
tasks.war.dependsOn(copylangmod)
